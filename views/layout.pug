doctype html
- const htmlLang = uiLang || lang || 'en';
html(lang=htmlLang)
  head
    block head
      title= title
      meta(property='og:site_name' content=t('layout.siteName'))
      if description
        meta(name="description" content=description)
      if canonicalUrl
        link(rel="canonical" href=canonicalUrl)
      if hreflang
        each alt in hreflang
          link(rel="alternate" hreflang=alt.lang href=alt.href)
      meta(name="viewport" content="width=device-width, initial-scale=1.0")
      link(rel="stylesheet" href="https://unpkg.com/easymde/dist/easymde.min.css")
      link(href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet")
      link(rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/7.5.0/css/flag-icons.min.css")
      link(rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/monokai.min.css")
      link(rel='stylesheet' href='/css/style.css')
      link(rel='stylesheet' href='/css/footer.css')
      link(rel="stylesheet" href="/css/auth.css")
      link(rel="stylesheet" href="/css/ui-lang-switcher.css")
      link(rel="stylesheet" href="/css/copy-btn.css")
      script(src="/js/auth.js")
      link(rel="icon" href="/assets/img/favicon.ico")
      link(rel='icon' type='image/png' sizes="192x192" href='/assets/img/logo-192.png')
      link(rel='icon' type='image/png' sizes='48x48' href='/assets/img/logo-48.png')
      link(rel="apple-touch-icon" sizes="180x180" href="/assets/img/logo-192.png")
      include schema.pug
      script(defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js")
      script(defer src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js")
      script#i18n-lang(type='application/json').
        !{JSON.stringify(htmlLang)}
      include partials/_i18n_exports
  body(
    data-is-logged-in=user ? "true" : "false"
    data-user-id=user ? user.id : null
    data-ui-base=uiPath("")
  )
    header.site-header
      .navbar
        header.navbar-header
          a.brand(href=uiPath('/'))
            img.brand-mark(
              src="/assets/img/logo-48.png"
              alt=""
              width="24"
              height="24"
              loading="eager"
              decoding="async"
            )
            span.logo= t('layout.siteName')
          a(href="#main-menu"
            id="main-menu-toggle"
            class="menu-toggle"
            aria-label=t('layout.openMenu'))
            span(class="sr-only")= t('layout.openMenu')
            span(class="fa fa-bars" aria-hidden="true")
          nav#main-menu.main-menu
            block nav
          a(href="#main-menu-toggle"
            class="backdrop"
            tabindex="-1"
            aria-hidden="true" hidden)
          .navbar-right
            .auth-wrapper
              p#welcome-message(
                data-welcome-prefix=t('nav.auth.welcomePrefix')
                data-welcome-fallback=t('nav.auth.welcomeFallbackUser')
                data-welcome-suffix=t('nav.auth.welcomeSuffix')
              )= t('layout.welcomeUser')
              button#nav-logout(type="button" style="display:none;")= t('layout.logout')
              a#nav-login(href=uiPath("/login") style="display:none;")= t('layout.login')
            // Quick Search (desktop + mobile)
            a.search-quick(
              href=uiPath('/search')
              aria-label=t('nav.search')
              title=t('nav.search')
            )
              i.fa.fa-search(aria-hidden="true")
              span.sr-only= t('nav.search')
            include partials/_ui_lang_switcher
      if uiLangIsFallback && uiLangFallbackFrom
        include partials/_ui_lang_fallback_banner
    .with-margins
      block content

    footer.footer(role="contentinfo")
      .footer-content
        p #{t('layout.copyright', {year: new Date().getFullYear()})} #{t('layout.siteName')}
        a(href=uiPath('/privacy'))= t('layout.privacy')

    include partials/_common_scripts
    block scripts
